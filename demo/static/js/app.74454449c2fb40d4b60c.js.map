{"version":3,"sources":["webpack:///./src/mixins/addressMixin.js","webpack:///src/components/AddressForm.vue","webpack:///./src/components/AddressForm.vue?f5a0","webpack:///src/App.vue","webpack:///./src/components/AddressForm.vue","webpack:///./src/App.vue?c624","webpack:///./src/App.vue","webpack:///./src/store/models/parcel.js","webpack:///./src/store/modules/address.js","webpack:///./src/store/index.js","webpack:///./src/main.js"],"names":["addressMixin","methods","extends_default","Object","vuex_esm","computed","folio","state","address","parcel","AddressForm","searching","input","components_AddressForm","render","_vm","this","_h","$createElement","_c","_self","on","submit","$event","preventDefault","search","staticClass","directives","name","rawName","value","expression","attrs","placeholder","autocomplete","required","domProps","target","composing","_v","class","btnClass","type","btnIcon","_s","btnText","helpText","_e","staticRenderFns","App","__webpack_require__","normalizeComponent","ssrContext","_this","err","selectortype_template_index_0_src_App","id","tag","$store","src_App","App_normalizeComponent","Parcel","feature","classCallCheck_default","attributes","FOLIO","SITE_ADDR","geometry","location","actions","findAddressAndParcel","_ref","_ref2","dispatch","_ref2$returnGeometry","returnGeometry","undefined","then","findAddress","_ref3","commit","esri_loader","_ref4","Locator","slicedToArray_default","url","outSpatialReference","wkid","addressToLocations","SingleLine","maxLocations","response","length","Error","fetchParcel","_ref6","arguments","_ref7","_ref8","QueryTask","Query","queryTask","esriEndpointUrl","query","outFields","esriFields","esriWkid","execute","features","mutations","setLocation","data","setParcel","setFormIsSearching","vue_esm","use","store","Store","modules","config","productionTip","el","template","components"],"mappings":"sJAEAA,GACEC,QAAAC,OACKC,OAAAC,EAAA,EAAAD,EACD,yBAECA,OAAAC,EAAA,EAAAD,EACD,wBAGJE,SAAUF,OAAAC,EAAA,EAAAD,EACRG,MAAO,SAAAC,GAAA,OAASA,EAAMC,QAAQC,OAAOH,UCgBzCI,QAEA,4CAGA,eACA,kCAEA,OAEAL,SAAAH,OAAAC,OAAAC,EAAA,EAAAD,yCAGAQ,uCAGA,gEAGA,wFAGA,4EAKAC,UCpDAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,QAAkBE,IAAIC,OAAA,SAAAC,GAA0BA,EAAAC,iBAAwBT,EAAAU,OAAAF,OAAqBJ,EAAA,OAAYO,YAAA,eAAyBP,EAAA,OAAYO,YAAA,+BAAyCP,EAAA,SAAcQ,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAf,EAAA,MAAAgB,WAAA,UAAoEL,YAAA,eAAAM,OAAoCC,YAAAlB,EAAAkB,YAAAC,aAAA,MAAAC,SAAA,IAAiEC,UAAWN,MAAAf,EAAA,OAAoBM,IAAKT,MAAA,SAAAW,GAAyBA,EAAAc,OAAAC,YAAsCvB,EAAAH,MAAAW,EAAAc,OAAAP,WAAgCf,EAAAwB,GAAA,KAAApB,EAAA,QAAyBO,YAAA,oBAA8BP,EAAA,UAAeO,YAAA,iBAAAc,MAAAzB,EAAA0B,SAAAT,OAAuDU,KAAA,YAAiBvB,EAAA,KAAUqB,MAAAzB,EAAA4B,UAAkB5B,EAAAwB,GAAA,KAAApB,EAAA,QAAyBO,YAAA,6BAAuCX,EAAAwB,GAAA,iBAAAxB,EAAA6B,GAAA7B,EAAA8B,SAAA,wBAAA9B,EAAAwB,GAAA,KAAAxB,EAAA,SAAAI,EAAA,SAA6GO,YAAA,yBAAmCX,EAAAwB,GAAA,WAAAxB,EAAA6B,GAAA7B,EAAA+B,UAAA,YAAA/B,EAAAgC,UAEh8BC,oBCYjBC,QAEA,kBAGAvC,YChBAwC,EAAA,OAaAC,CACAzC,EACAG,GATA,EATA,SAAAuC,GACAF,EAAA,SAYA,KAEA,MAUA,iBDHAlD,+BAEA,IAAAqD,EAAArC,8BACA,gGAEA,6CAEA,iBAEAsC,QE5BAC,GADiBzC,OAFjB,WAA0B,IAAaG,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBa,OAAOwB,GAAA,SAAYrC,EAAA,eAAoBsC,IAAA,MAAApC,IAAcI,OAArIT,KAAqIS,UAArIT,KAA0JuB,GAAA,KAAApB,EAAA,OAAwBO,YAAA,2BAAlLV,KAAuNuB,GAAvNvB,KAAuN4B,GAAvN5B,KAAuN0C,OAAAnD,aAEhOyC,oBCoBjBW,EAtBAT,EAAA,OAaAU,CACAX,EACAM,GATA,EAEA,KAEA,KAEA,MAUA,gGCrBE,SAAAM,EAAaC,GAASC,IAAA/C,KAAA6C,GACpB7C,KAAKV,MAAQwD,EAAQE,WAAWC,MAChCjD,KAAKR,QAAUsD,EAAQE,WAAWE,UAClClD,KAAKmD,SAAWL,EAAQK,oEAKxB,MAAO,kIAIP,OAAQ,QAAS,gDAIjB,OAAO,gBCTX3D,GACED,OACEI,WAAW,EACXyD,SAAU,KACV3D,OAAQ,MAEV4D,SACEC,qBADO,SAAAC,EAAAC,GAC4D,IAA5CC,EAA4CF,EAA5CE,SAAY7D,EAAgC4D,EAAhC5D,MAAgC8D,EAAAF,EAAzBG,sBAAyBC,IAAAF,KACjE,OAAOD,EAAS,cAAe7D,GAAOiE,KAAK,WACzC,OAAOJ,EAAS,cAAeE,MAGnCG,YANO,SAAAC,EAMgBnE,GAAO,IAAhBoE,EAAgBD,EAAhBC,OAGZ,OAFAA,EAAO,cAAe,MACtBA,EAAO,YAAa,MACbC,EAAA,aACL,uBAEDJ,KAAK,SAAAK,GAMJ,OALgB,IAAIC,EADDC,IAAAF,EAAA,QAEjBG,IAxBc,iHAyBdC,qBAAsBC,KAxBf,UA2BQC,oBACfhF,SAAUiF,WAAY7E,GACtB8E,aAAc,IAEfb,KAAK,SAAAc,GACJ,IAAIA,EAASC,OAGX,MAAM,IAAIC,MAAM,8CAFhBb,EAAO,cAAeW,EAAS,GAAGvB,eAO1C0B,YA/BO,SAAAC,GA+B+C,IAAxCxF,EAAwCwF,EAAxCxF,MAAOyE,EAAiCe,EAAjCf,OAASL,EAAwBqB,UAAAJ,OAAA,QAAAhB,IAAAoB,UAAA,IAAAA,UAAA,GACpD,OAAOf,EAAA,aACL,uBACA,6BAEDJ,KAAK,SAAAoB,GAAwB,IAAAC,EAAAd,IAAAa,EAAA,GAAtBE,EAAsBD,EAAA,GAAXE,EAAWF,EAAA,GACxBG,EAAY,IAAIF,GAClBd,IAAK5E,EAAO6F,oBAGVC,EAAQ,IAAIH,EAMhB,OALAG,EAAMC,UAAY/F,EAAOgG,aACzBF,EAAMjB,qBAAuBC,KAAM9E,EAAOiG,YAC1CH,EAAM5B,eAAiBA,EACvB4B,EAAMpC,SAAW5D,EAAM6D,SAEhBiC,EAAUM,QAAQJ,GAAO1B,KAAK,SAAAc,GACnC,IAAIA,EAASiB,SAAShB,OAGpB,MAAM,IAAIC,MAAM,kDAFhBb,EAAO,YAAa,IAAIvE,EAAOkF,EAASiB,SAAS,WAQ3DC,WACEC,YADS,SACIvG,EAAOwG,GAClBxG,EAAM6D,SAAW2C,GAEnBC,UAJS,SAIEzG,EAAOwG,GAChBxG,EAAME,OAASsG,GAEjBE,mBAPS,SAOW1G,EAAOwG,GACzBxG,EAAMI,UAAYoG,KC1ExBG,EAAA,EAAIC,IAAI/G,EAAA,GAER,IAAAgH,EAAA,IAAmBhH,EAAA,EAAKiH,OACtBC,SACE9G,aCFJ0G,EAAA,EAAIK,OAAOC,eAAgB,EAG3B,IAAIN,EAAA,GACFO,GAAI,OAEJL,QACAM,SAAU,SACVC,YAAc1E,IAAAU","file":"static/js/app.74454449c2fb40d4b60c.js","sourcesContent":["import { mapState, mapActions, mapMutations } from 'vuex'\n\nexport default {\n  methods: {\n    ...mapActions([\n      'findAddressAndParcel'\n    ]),\n    ...mapMutations([\n      'setFormIsSearching'\n    ])\n  },\n  computed: mapState({\n    folio: state => state.address.parcel.folio\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mixins/addressMixin.js","<template lang=\"html\">\n  <form @submit.prevent=\"search\">\n\n    <div class=\"form-group\">\n\n      <div class=\"input-group input-group-lg\">\n        <input class=\"form-control\" v-model=\"input\" :placeholder=\"placeholder\" autocomplete=\"off\" required>\n        <span class=\"input-group-btn\">\n          <button class=\"btn text-white\" :class=\"btnClass\" type=\"submit\">\n            <i :class=\"btnIcon\"></i>\n            <span class=\"d-none d-sm-inline-block\">\n              {{ btnText }}\n            </span>\n          </button>\n        </span>\n      </div>\n\n      <small v-if=\"helpText\" class=\"form-text text-muted\">\n        {{ helpText }}\n      </small>\n\n    </div>\n  </form>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'address-form',\n  data () {\n    return {\n      input: '',\n      placeholder: 'Your Street Address...',\n      helpText: null\n    }\n  },\n  computed: {\n    ...mapState({\n      searching: state => state.address.searching\n    }),\n    btnText () {\n      // return (this.searching) ? 'Loading' : 'Find'\n      return 'Find'\n    },\n    btnClass () {\n      return (this.searching) ? 'btn-warning' : 'btn-secondary'\n    },\n    btnIcon () {\n      return (this.searching) ? 'fa fa-fw fa-spinner fa-spin' : 'fa fa-fw fa-search'\n    }\n  },\n  methods: {\n    search () {\n      this.$emit('search', this.input)\n    }\n  }\n}\n</script>\n\n<style scope>\n.btn {\n  white-space: nowrap;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/AddressForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();_vm.search($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"input-group input-group-lg\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.input),expression:\"input\"}],staticClass:\"form-control\",attrs:{\"placeholder\":_vm.placeholder,\"autocomplete\":\"off\",\"required\":\"\"},domProps:{\"value\":(_vm.input)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.input=$event.target.value}}}),_vm._v(\" \"),_c('span',{staticClass:\"input-group-btn\"},[_c('button',{staticClass:\"btn text-white\",class:_vm.btnClass,attrs:{\"type\":\"submit\"}},[_c('i',{class:_vm.btnIcon}),_vm._v(\" \"),_c('span',{staticClass:\"d-none d-sm-inline-block\"},[_vm._v(\"\\n            \"+_vm._s(_vm.btnText)+\"\\n          \")])])])]),_vm._v(\" \"),(_vm.helpText)?_c('small',{staticClass:\"form-text text-muted\"},[_vm._v(\"\\n      \"+_vm._s(_vm.helpText)+\"\\n    \")]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-38ef8564\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/AddressForm.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n\n    <div is=\"AddressForm\" v-on:search=\"search\"></div>\n\n    <pre class=\"bg-dark text-light p-2\">{{ $store.state }}</pre>\n\n  </div>\n</template>\n\n<script>\nimport addressMixin from './mixins/addressMixin'\nimport AddressForm from '@/components/AddressForm'\n\nexport default {\n  name: 'app',\n  components: {\n    AddressForm\n  },\n  mixins: [\n    addressMixin\n  ],\n  methods: {\n    search (input) {\n      this.setFormIsSearching(true)\n      this.findAddressAndParcel({input, returnGeometry: true}).then(() => {\n        this.setFormIsSearching(false)\n      }).catch(err => {\n        this.setFormIsSearching(false)\n        // error handler\n        console.error(err)\n      })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-38ef8564\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddressForm.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddressForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-38ef8564\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddressForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AddressForm.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c(\"AddressForm\",{tag:\"div\",on:{\"search\":_vm.search}}),_vm._v(\" \"),_c('pre',{staticClass:\"bg-dark text-light p-2\"},[_vm._v(_vm._s(_vm.$store.state))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-73df2451\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73df2451\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","export default class Parcel {\n  constructor (feature) {\n    this.folio = feature.attributes.FOLIO\n    this.address = feature.attributes.SITE_ADDR\n    this.geometry = feature.geometry\n  }\n\n  // esri settings\n  static esriEndpointUrl () {\n    return 'https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/HC_Parcels/MapServer/0'\n  }\n\n  static esriFields () {\n    return ['FOLIO', 'SITE_ADDR']\n  }\n\n  static esriWkid () {\n    return 102100\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/models/parcel.js","import * as esriLoader from 'esri-loader'\nimport Parcel from '../models/parcel'\n\n// const esriGeocoderUrl = 'http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer'\nconst esriGeocoderUrl = 'https://maps.hillsboroughcounty.org/arcgis/rest/services/Geocoding/DBO_composite_address_locator/GeocodeServer'\nconst esriWkid = 102100\n\n// vuex module\nexport default {\n  state: {\n    searching: false,\n    location: null,\n    parcel: null\n  },\n  actions: {\n    findAddressAndParcel ({dispatch}, {input, returnGeometry = false}) {\n      return dispatch('findAddress', input).then(() => {\n        return dispatch('fetchParcel', returnGeometry)\n      })\n    },\n    findAddress ({commit}, input) {\n      commit('setLocation', null)\n      commit('setParcel', null)\n      return esriLoader.loadModules([\n        'esri/tasks/Locator'\n      ])\n      .then(([Locator]) => {\n        var hcLocator = new Locator({\n          url: esriGeocoderUrl,\n          outSpatialReference: {wkid: esriWkid}\n        })\n\n        return hcLocator.addressToLocations({\n          address: {SingleLine: input},\n          maxLocations: 1\n        })\n        .then(response => {\n          if (response.length) {\n            commit('setLocation', response[0].location)\n          } else {\n            throw new Error('That address was not found in our records.')\n          }\n        })\n      })\n    },\n    fetchParcel ({state, commit}, returnGeometry = false) {\n      return esriLoader.loadModules([\n        'esri/tasks/QueryTask',\n        'esri/tasks/support/Query'\n      ])\n      .then(([QueryTask, Query]) => {\n        var queryTask = new QueryTask({\n          url: Parcel.esriEndpointUrl()\n        })\n\n        var query = new Query()\n        query.outFields = Parcel.esriFields()\n        query.outSpatialReference = {wkid: Parcel.esriWkid()}\n        query.returnGeometry = returnGeometry\n        query.geometry = state.location\n\n        return queryTask.execute(query).then(response => {\n          if (response.features.length) {\n            commit('setParcel', new Parcel(response.features[0]))\n          } else {\n            throw new Error('A parcel could not be matched to that address.')\n          }\n        })\n      })\n    }\n  },\n  mutations: {\n    setLocation (state, data) {\n      state.location = data\n    },\n    setParcel (state, data) {\n      state.parcel = data\n    },\n    setFormIsSearching (state, data) {\n      state.searching = data\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/address.js","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport address from './modules/address'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  modules: {\n    address\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n// import router from './router'\nimport store from './store'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  // router,\n  store,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}
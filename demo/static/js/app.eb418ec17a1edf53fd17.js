webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),r=n("Dd8w"),i=n.n(r),o=n("NYxO"),a={methods:i()({},Object(o.b)(["findAddressAndParcel"]),Object(o.c)(["setFormIsSearching"])),computed:Object(o.d)({folio:function(t){return t.address.parcel.folio}})},c={name:"address-form",data:function(){return{placeholder:"Your Street Address...",helpText:null}},computed:i()({},Object(o.d)({addressInput:function(t){return t.address.input},searching:function(t){return t.address.searching}}),{input:{get:function(){return this.addressInput},set:function(t){this.setInput(t)}},btnText:function(){return"Find"},btnClass:function(){return this.searching?"btn-warning":"btn-secondary"},btnIcon:function(){return this.searching?"fa fa-fw fa-spinner fa-spin":"fa fa-fw fa-search"}}),methods:i()({},Object(o.c)(["setInput"]),{search:function(){this.$emit("search",this.input)}})},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){e.preventDefault(),t.search(e)}}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group input-group-lg"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"form-control",attrs:{placeholder:t.placeholder,autocomplete:"off",required:""},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),n("span",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn text-white",class:t.btnClass,attrs:{type:"submit"}},[n("i",{class:t.btnIcon}),t._v(" "),n("span",{staticClass:"d-none d-sm-inline-block"},[t._v("\n            "+t._s(t.btnText)+"\n          ")])])])]),t._v(" "),t.helpText?n("small",{staticClass:"form-text text-muted"},[t._v("\n      "+t._s(t.helpText)+"\n    ")]):t._e()])])},staticRenderFns:[]},l={name:"app",components:{AddressForm:n("VU/8")(c,u,!1,null,null,null).exports},mixins:[a],methods:{search:function(t){var e=this;this.setFormIsSearching(!0),this.findAddressAndParcel(!0).then(function(){e.setFormIsSearching(!1)}).catch(function(t){e.setFormIsSearching(!1),console.error(t)})}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("AddressForm",{tag:"div",on:{search:this.search}}),this._v(" "),e("pre",{staticClass:"bg-dark text-light p-2"},[this._v(this._s(this.$store.state))])])},staticRenderFns:[]},p=n("VU/8")(l,d,!1,null,null,null).exports,h=n("d7EF"),f=n.n(h),m=n("Meid"),g=n("Zrlr"),v=n.n(g),b=n("wxAW"),_=n.n(b),w=function(){function t(e){v()(this,t),this.folio=e.attributes.FOLIO,this.address=e.attributes.SITE_ADDR,this.geometry=e.geometry}return _()(t,null,[{key:"esriEndpointUrl",value:function(){return"https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/HC_Parcels/MapServer/0"}},{key:"esriFields",value:function(){return["FOLIO","SITE_ADDR"]}},{key:"esriWkid",value:function(){return 102659}}]),t}(),A={state:{input:null,searching:!1,location:null,parcel:null},actions:{findAddressAndParcel:function(t){var e=t.dispatch,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e("findAddress").then(function(){return e("fetchParcel",n)})},findAddress:function(t){var e=t.state,n=t.commit;return n("setLocation",null),n("setParcel",null),m.loadModules(["esri/tasks/Locator"]).then(function(t){return new(0,f()(t,1)[0])({url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/Geocoding/Composite_Address_Locator_WebApps/GeocodeServer",outSpatialReference:{wkid:102659}}).addressToLocations({address:{SingleLine:e.input},maxLocations:1}).then(function(t){if(!t.length)throw new Error("That address was not found in our records.");n("setLocation",t[0].location)})})},fetchParcel:function(t){var e=t.state,n=t.commit,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return m.loadModules(["esri/tasks/QueryTask","esri/tasks/support/Query"]).then(function(t){var r=f()(t,2),i=r[0],o=r[1],a=new i({url:w.esriEndpointUrl()}),c=new o;return c.outFields=w.esriFields(),c.outSpatialReference={wkid:w.esriWkid()},c.returnGeometry=s,c.geometry=e.location,a.execute(c).then(function(t){if(!t.features.length)throw new Error("A parcel could not be matched to that address.");n("setParcel",new w(t.features[0]))})})}},mutations:{setInput:function(t,e){t.input=e},setLocation:function(t,e){t.location=e},setParcel:function(t,e){t.parcel=e},setFormIsSearching:function(t,e){t.searching=e}}};s.a.use(o.a);var x=new o.a.Store({modules:{address:A}});s.a.config.productionTip=!1,new s.a({el:"#app",store:x,template:"<App/>",components:{App:p}})}},["NHnr"]);
//# sourceMappingURL=app.eb418ec17a1edf53fd17.js.map
webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),s=n("Dd8w"),i=n.n(s),o=n("NYxO"),a={methods:i()({},Object(o.b)(["findAddressAndParcel"]),Object(o.c)(["setFormIsSearching"])),computed:Object(o.d)({folio:function(e){return e.address.parcel.folio}})},c={name:"address-form",data:function(){return{input:"",placeholder:"Your Street Address...",helpText:null}},computed:i()({},Object(o.d)({searching:function(e){return e.address.searching}}),{btnText:function(){return"Find"},btnClass:function(){return this.searching?"btn-warning":"btn-secondary"},btnIcon:function(){return this.searching?"fa fa-fw fa-spinner fa-spin":"fa fa-fw fa-search"}}),methods:{search:function(){this.$emit("search",this.input)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){t.preventDefault(),e.search(t)}}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group input-group-lg"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"form-control",attrs:{placeholder:e.placeholder,autocomplete:"off",required:""},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}}),e._v(" "),n("span",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn text-white",class:e.btnClass,attrs:{type:"submit"}},[n("i",{class:e.btnIcon}),e._v(" "),n("span",{staticClass:"d-none d-sm-inline-block"},[e._v("\n            "+e._s(e.btnText)+"\n          ")])])])]),e._v(" "),e.helpText?n("small",{staticClass:"form-text text-muted"},[e._v("\n      "+e._s(e.helpText)+"\n    ")]):e._e()])])},staticRenderFns:[]},l={name:"app",components:{AddressForm:n("VU/8")(c,u,!1,function(e){n("YwaU")},null,null).exports},mixins:[a],methods:{search:function(e){var t=this;this.setFormIsSearching(!0),this.findAddressAndParcel(e).then(function(){t.setFormIsSearching(!1)}).catch(function(e){t.setFormIsSearching(!1),console.error(e)})}}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("AddressForm",{tag:"div",on:{search:this.search}}),this._v(" "),t("pre",{staticClass:"bg-dark text-light p-2"},[this._v(this._s(this.$store.state))])])},staticRenderFns:[]},f=n("VU/8")(l,d,!1,null,null,null).exports,h=n("d7EF"),p=n.n(h),m=n("Meid"),g=n("Zrlr"),v=n.n(g),b=n("wxAW"),w=n.n(b),_=function(){function e(t){v()(this,e),this.folio=t.attributes.FOLIO,this.address=t.attributes.SITE_ADDR,this.geometry=t.geometry}return w()(e,null,[{key:"esriEndpointUrl",value:function(){return"https://maps.hillsboroughcounty.org/arcgis/rest/services/InfoLayers/HC_Parcels/MapServer/0"}},{key:"esriFields",value:function(){return["FOLIO","SITE_ADDR"]}},{key:"esriWkid",value:function(){return 102100}}]),e}(),x={state:{searching:!1,location:null,parcel:null},actions:{findAddressAndParcel:function(e,t){var n=e.dispatch;return n("findAddress",t).then(function(){return n("fetchParcel")})},findAddress:function(e,t){var n=e.commit;return m.loadModules(["esri/tasks/Locator"]).then(function(e){return new(0,p()(e,1)[0])({url:"https://maps.hillsboroughcounty.org/arcgis/rest/services/Geocoding/DBO_composite_address_locator/GeocodeServer",outSpatialReference:{wkid:102100}}).addressToLocations({address:{SingleLine:t},maxLocations:1}).then(function(e){if(!e.length)throw new Error("That address was not found in our records.");n("setLocation",e[0].location)})})},fetchParcel:function(e){var t=e.state,n=e.commit,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return m.loadModules(["esri/tasks/QueryTask","esri/tasks/support/Query"]).then(function(e){var s=p()(e,2),i=s[0],o=s[1],a=new i({url:_.esriEndpointUrl()}),c=new o;return c.outFields=_.esriFields(),c.outSpatialReference={wkid:_.esriWkid()},c.returnGeometry=r,c.geometry=t.location,a.execute(c).then(function(e){if(!e.features.length)throw new Error("A parcel could not be matched to that address.");n("setParcel",new _(e.features[0]))})})}},mutations:{setLocation:function(e,t){e.location=t},setParcel:function(e,t){e.parcel=t},setFormIsSearching:function(e,t){e.searching=t}}};r.a.use(o.a);var A=new o.a.Store({modules:{address:x}});r.a.config.productionTip=!1,new r.a({el:"#app",store:A,template:"<App/>",components:{App:f}})},YwaU:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.54ad5203a9d176e9b821.js.map